# mindNote MCP 工具

> **注意**: v2.0架构中，MCP工具已降级为**可选开放接口层**，不再是核心功能。核心功能是语音驱动的本地+云端混合架构。

## 概述

mindNote MCP工具是可选的开放接口组件，用于：
- 供外部AI助手（如Claude Desktop）查询设备状态
- 提供REST API供App调用
- 支持智能家居集成

**当前状态**: Phase 4可选功能，优先级低于核心语音交互

## 组件

### 1. 日记记录MCP (`/diary-record-mcp`)

供外部系统查询和操作情绪日记数据。

**主要功能：**
- 查询情绪日记条目
- 获取情绪统计

**注意**: 记录功能由核心对话引擎自动完成，不需要外部调用。

### 2. 情绪监测MCP (`/emotion-monitor-mcp`)

供外部系统查询环境数据。

**主要功能：**
- 获取当前室内环境数据
- 获取室外天气数据

### 3. 洞察生成MCP (`/insight-generator-mcp`)

供外部系统查询洞察数据。

**主要功能：**
- 获取情绪洞察
- 获取趋势分析
- 导出数据

## 使用场景

```
┌─────────────────────────────────────────────────────────┐
│                    使用场景                              │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  场景1: Claude Desktop 查询                              │
│  用户: "帮我看看这周的情绪趋势"                          │
│  Claude → MCP工具 → 获取洞察 → 返回结果                 │
│                                                         │
│  场景2: 移动App查看数据                                  │
│  App → REST API → 查询数据库 → 展示图表                 │
│                                                         │
│  场景3: 智能家居联动                                     │
│  智能中枢 → MCP工具 → 获取环境 → 控制设备               │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

## 与核心架构的关系

```
┌─────────────────────────────────────────────────────────┐
│                   MindNote 完整架构                      │
├─────────────────────────────────────────────────────────┤
│                                                         │
│  Layer 1-4: 核心功能 (语音交互 + 对话引擎 + 数据服务)   │
│  ├── 语音唤醒 → ASR → 意图分类 → LLM → TTS → 播放      │
│  ├── 情绪记录 (自动)                                    │
│  ├── 环境感知 (自动)                                    │
│  └── 数据存储 (SQLite)                                  │
│                                                         │
│  Layer 5: 开放接口 (可选, Phase 4)                      │
│  ├── REST API (App调用)                                 │
│  ├── MCP Server (AI助手调用) ← 当前仓库                │
│  └── WebSocket (实时推送, 未来)                         │
│                                                         │
└─────────────────────────────────────────────────────────┘
```

## 使用方法

每个MCP工具都是一个独立的Node.js应用程序：

```bash
# 进入工具目录
cd mcp-tools/diary-record-mcp

# 安装依赖
npm install

# 启动服务器
npm start
```

**注意**: MCP工具依赖于核心服务的数据层，需要确保核心服务正常运行。

## MCP配置

每个工具都包含一个`mcp-config.json`文件，定义了该工具的MCP接口。

## 未来规划

MCP工具将在Phase 4实现，目前处于设计阶段。

---

**文档版本**: v2.0
**更新日期**: 2026年1月12日
**状态**: 可选功能，Phase 4实现